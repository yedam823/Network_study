## 전가상화

하드웨어를 완전히 가상화하는 방식

게스트OS는 하드웨어 자원을 요청하기 위해 반드시 하이퍼바이저가 중재 해야 한다.

호스트 CPU의 가상화 기술을 이용해 전체 하드웨어를 완전히 가상화하는 기술이나 CPU의 VT(virutalization Technology), AMD-V 등의 물리적 가상화 지원 기능을 이용하면 가능하다

![image.png](attachment:95d80728-9222-4fb3-b4c3-a6cf77384b69:image.png)

- 장점 : 하드웨어를 완전히 가상화해서 수정 필요X
- 단점: 하이퍼바이저가 모든 명령을 중재하기 때문에 성능이 비교적 느림

## 반가상화

말그대로 절반만 가상화 시킴

반가상화를 지원하도록 수정된 커널과 장치 드라이버가 필요하다 (게스트OS의 커널을 수정하여 특권 명령이 수행될 때 HVC를 호출하여 하이퍼바이저가 실행될 수 있도록 하는 기술)

대표적 반가상화 방식 소프트웨어인 Xen에서 게스트 OS는 Hyper call 이라는 명령어를 통해 하드웨어에 필요한 자원을 바로 하이퍼바이저에 전달하고, 하이퍼바이저는 바로 하드웨어를 제어한다.

![image.png](attachment:89b1d839-9442-42ad-bdaf-47fcc8b7d678:image.png)

- 장점 : 전가상화보다 빠름
- 단점 : 게스트 OS의 커널을 좀 수정해야함

### 둘의 차이점

![사진설명 : 전가상화는 게스트OS에서 HW자원 요구 → HW가 hypervisor에게 HW 제어 요구 → hypervisor가 HW제어 과정을 거치고, 반가상화는 수정된 게스트OS 에서 HW자원요구 → 하이퍼바이저에서 하드웨어 제어 과정을 거친다  (반가상화가 과정이 훨씬 간단하다.)](attachment:0e6c686d-5559-4224-99e0-f77c60cae6c9:image.png)

사진설명 : 전가상화는 게스트OS에서 HW자원 요구 → HW가 hypervisor에게 HW 제어 요구 → hypervisor가 HW제어 과정을 거치고, 반가상화는 수정된 게스트OS 에서 HW자원요구 → 하이퍼바이저에서 하드웨어 제어 과정을 거친다  (반가상화가 과정이 훨씬 간단하다.)
