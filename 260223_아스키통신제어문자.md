## 시리얼 데이터 통신을 위한 프로토콜

데이터가 어느시점에 시작하고 끝나는가를 알 수 있어야함

→ STX(0x02)와 ETX(0x03)가 생겨남

근데 얘네와 겹치는 내용이 데이터 안에 있다면 문제가 생길 수 있음

→ 그래서 DLE(data link escape) 문자를 보냄

### DLE?

0x10 으로, 이걸 만나면 뒤에 나올 0x02, 0x03은 STX나 ETX가 아닌 데이터로 인식하게 함

→ ETX 앞에 0x10이라는 데이터가 있다면 ETX도 데이터로 인식할 수 있다는 문제 발생

이런 경우에는 0x10라는 데이터 앞에 DLE을 붙인다.

![image.png](attachment:8055cc78-faac-4181-8c19-0862c2bb6710:image.png)

### 조금 다른 관점

위 설명한 방법도 있지만 STX 와 ETX 앞에 반드시 DLE가 오게하는 방법도 있다. (이렇게 하면 0x02와 0x03 데이터 앞에 DLE를 붙이지 않아도 된다.)

![image.png](attachment:cdb81451-48bf-4767-b18a-f93dd5ef3a09:image.png)

![image.png](attachment:06e51571-f430-43e7-8a21-bff849388625:image.png)

어느 방법이든 딱히 문제는 없다

## 통신 제어 문자

시리얼 통신이나 소켓통신을 할 때 패킷의 처음과 끝에 제어문자를 넣어줘야하는 경우가 있다.

자주 쓰는 것만 정리함

| 2진법 | 10진법 | 8진법 | 16진법 | 문자 | 설명 |
| --- | --- | --- | --- | --- | --- |
| 0000 0000 | 000 | 000 | 00 | NUL | NULL 문자 |
| 0000 0010 | 002 | 002 | 02 | STX | 본문 시작, 헤더 종료 |
| 0000 0011 | 003 | 003 | 03 | ETX | 전송종료, 데이터 링크 초기화 |
| 0000 0110 | 006 | 006 | 06 | ACK | 긍정응답 |
| 0000 1010 | 010 | 012 | 0A | LF | 개행 |
| 00000 1101 | 013 | 015 | 0D | CR | 복귀 |
| 0001 0101 | 021 | 025 | 15 | NAK | 부정응답 |
| 0001 0110 | 022 | 026 | 16 | SYN | 동기 |
